<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Scalers and Adders &mdash; OpenMDAO Documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenMDAO Documentation" href="../../index.html" />
    <link rel="up" title="Simple Optimization" href="index.html" />
    <link rel="next" title="Building a Model - Executing a Design of Experiment (DOE)" href="doe.html" />
    <link rel="prev" title="Building a Model - Constrained Optimization" href="constrained.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="doe.html" title="Building a Model - Executing a Design of Experiment (DOE)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="constrained.html" title="Building a Model - Constrained Optimization"
             accesskey="P">previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="../index.html" >OpenMDAO Tutorials</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Simple Optimization</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-scalers-and-adders">
<h1>Using Scalers and Adders<a class="headerlink" href="#using-scalers-and-adders" title="Permalink to this headline">¶</a></h1>
<div class="section" id="an-example-problem-requiring-scaling">
<h2>An Example Problem Requiring Scaling<a class="headerlink" href="#an-example-problem-requiring-scaling" title="Permalink to this headline">¶</a></h2>
<p>Some systems may not be well-suited for numerical solution or optimization
due to differences in magnitudes of their parameters. This problem can be
addressed in OpenMDAO by setting scaler and adder values when adding
parameters to a driver. To demonstrate this, let&#8217;s define a paraboloid
function <cite>f</cite>, and minimize it with respect to two input variables, <cite>x</cite> and
<cite>y</cite>. This function is given by</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">f(x,y)</span> <span class="pre">=</span> <span class="pre">(1000x-3)^2</span> <span class="pre">+</span> <span class="pre">(1000x)*(0.01y)</span> <span class="pre">+</span> <span class="pre">(0.01y+4)^2</span> <span class="pre">-</span> <span class="pre">3</span></tt></div></blockquote>
<p>and is implemented as the following openMDAO component:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Assembly</span><span class="p">,</span><span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.drivers.api</span> <span class="kn">import</span> <span class="n">SLSQPdriver</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span>


<span class="k">class</span> <span class="nc">Paraboloid_scale</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Evaluates the equation f(x,y) = (1000*x-3)^2 + (1000*x)*(0.01*y) + (0.01*y+4)^2 - 3 &quot;&quot;&quot;</span>

    <span class="c"># set up interface to the framework</span>
    <span class="c"># pylint: disable-msg=E1101</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The variable x&#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The variable y&#39;</span><span class="p">)</span>

    <span class="n">f_xy</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;F(x,y)&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;f(x,y) = (x-3)^2 + xy + (y+4)^2 - 3</span>
<span class="sd">        Optimal solution (minimum): x = 0.0066666666666666671; y = -733.33333333333337</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">f_xy</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1000.</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mf">3.</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1000.</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">0.01</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.01</span><span class="o">*</span><span class="n">y</span><span class="o">+</span><span class="mf">4.</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mf">3.</span>
</pre></div>
</div>
<p>It can be shown that <cite>f</cite> has a global minimum at <tt class="docutils literal"><span class="pre">`x`</span> <span class="pre">=</span> <span class="pre">1/150</span> <span class="pre">=</span> <span class="pre">0.00666667</span> <span class="pre">and</span>
<span class="pre">`y`</span> <span class="pre">=</span> <span class="pre">-2200/3</span> <span class="pre">=</span> <span class="pre">-733.333333</span></tt>. But it can also be shown that <cite>f</cite> is far more
sensitive to variation in <cite>x</cite> than variation in <cite>y</cite>. Numerical optimization
of <cite>f</cite> may not converge to the true minimum due to this difference in
sensitivity, or it may require a large number of iterations to reach the true
minimum compared to a well-scaled problem. Let&#8217;s show this using the
following assembly:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">OptimizationUnconstrainedScale</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unconstrained optimization of the unscaled Paraboloid Component.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new Assembly containing an unscaled Paraboloid and an optimizer&quot;&quot;&quot;</span>

        <span class="c"># Create Optimizer instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;driver&#39;</span><span class="p">,</span> <span class="n">SLSQPdriver</span><span class="p">())</span>

        <span class="c"># Create Paraboloid component instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;paraboloid&#39;</span><span class="p">,</span> <span class="n">Paraboloid_scale</span><span class="p">())</span>

        <span class="c"># Driver process definition</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;paraboloid&#39;</span><span class="p">)</span>

        <span class="c"># SQLSQP Flags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">iprint</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># Objective</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_objective</span><span class="p">(</span><span class="s">&#39;paraboloid.f_xy&#39;</span><span class="p">)</span>

        <span class="c"># Design Variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.x&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.y&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
</pre></div>
</div>
<p>Running the optimization results in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span> <span class="o">=</span> <span class="n">OptimizationUnconstrainedScale</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">y</span>
<span class="go">(0.006667, -733.334333)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Elapsed time: &quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span><span class="p">,</span> <span class="s">&quot;seconds&quot;</span>
<span class="go">Elapsed time:  0.0150000334249 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Execution count: &quot;</span><span class="p">,</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">exec_count</span>
<span class="go">Execution count:  53</span>
</pre></div>
</div>
<p>Note that the actual numbers for execution time and for the number of
functional evaluations will differ depending on platform or architecture.
Now, consider modifying the assembly so that <cite>x</cite> and <cite>y</cite> have scalers
specified when added to the assembly&#8217;s driver:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.x&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">scaler</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.y&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">scaler</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Running the assembly with these specifications for <cite>x</cite> and <cite>y</cite> gives:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span> <span class="o">=</span> <span class="n">OptimizationUnconstrainedScale</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">y</span>
<span class="go">(0.006667, -733.333313)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Elapsed time: &quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span><span class="p">,</span> <span class="s">&quot;seconds&quot;</span>
<span class="go">Elapsed time:  0.0 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Execution count: &quot;</span><span class="p">,</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">exec_count</span>
<span class="go">Execution count:  23</span>
</pre></div>
</div>
<p>So, the computed minimizers of <cite>f</cite> are closer to the true minimizers of <cite>f</cite>
when scaling is used. Furthermore, this optimization was computed more
quickly and used fewer iterations with scaling than without scaling.</p>
<p>Next, let&#8217;s look at a problem well-suited for both scalers and adders: a
shifted and scaled paraboloid given by</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">f(x,y)</span> <span class="pre">=</span> <span class="pre">(1000x-3)^2</span> <span class="pre">+</span> <span class="pre">(1000x)*(0.01*(y+1000))</span> <span class="pre">+</span> <span class="pre">(0.01*(y+1000)+4)^2</span> <span class="pre">-</span> <span class="pre">3</span></tt></div></blockquote>
<p>which has the minimum (<tt class="docutils literal"><span class="pre">0.006667,</span> <span class="pre">-1733.334333</span></tt>). This is implemented using the component:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Paraboloid_shift</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Evaluates the equation f(x,y) = (1000*x-3)^2 + (1000*x)*(0.01*(y+1000)) + (0.01*(y+1000)+4)^2 - 3  &quot;&quot;&quot;</span>

    <span class="c"># set up interface to the framework</span>
    <span class="c"># pylint: disable-msg=E1101</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The variable x&#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The variable y&#39;</span><span class="p">)</span>

    <span class="n">f_xy</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;F(x,y)&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;f(x,y) = (1000*x-3)^2 + (1000*x)*(0.01*(y+1000)) + (0.01*(y+1000)+4)^2 - 3</span>
<span class="sd">        Optimal solution (minimum): x = 0.0066666666666666671; y = -1733.33333333333337</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">f_xy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">0.01</span><span class="o">*</span><span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mi">1000</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.01</span><span class="o">*</span><span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mi">1000</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">3</span>
</pre></div>
</div>
<p>As before, a direct optimization can be performed using the assembly:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">OptimizationUnconstrainedScaleShift</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unconstrained optimization of the Paraboloid Component.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new Assembly containing a Paraboloid and an optimizer&quot;&quot;&quot;</span>

        <span class="c"># pylint: disable-msg=E1101</span>

        <span class="c"># Create Optimizer instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;driver&#39;</span><span class="p">,</span> <span class="n">SLSQPdriver</span><span class="p">())</span>

        <span class="c"># Create Paraboloid component instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;paraboloid&#39;</span><span class="p">,</span> <span class="n">Paraboloid_shift</span><span class="p">())</span>

        <span class="c"># Driver process definition</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;paraboloid&#39;</span><span class="p">)</span>

        <span class="c"># SQLSQP Flags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">iprint</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># Objective</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_objective</span><span class="p">(</span><span class="s">&#39;paraboloid.f_xy&#39;</span><span class="p">)</span>

        <span class="c"># Design Variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.x&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000000.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.y&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000000.</span><span class="p">)</span>
</pre></div>
</div>
<p>Running this produces:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span> <span class="o">=</span> <span class="n">OptimizationUnconstrainedScaleShift</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">y</span>
<span class="go">(0.006667, -1733.333313)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Elapsed time: &quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span><span class="p">,</span> <span class="s">&quot;seconds&quot;</span>
<span class="go">Elapsed time:  0.0160000324249 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Execution count: &quot;</span><span class="p">,</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">exec_count</span>
<span class="go">Execution count:  52</span>
</pre></div>
</div>
<p>So, consider specifying both scaler and adder values for <cite>x</cite> and <cite>y</cite> when adding them to <cite>driver</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.x&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">scaler</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;paraboloid.y&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1000000.</span><span class="p">,</span> <span class="n">scaler</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">adder</span><span class="o">=-</span><span class="mf">1000.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Running the assembly now gives:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span> <span class="o">=</span> <span class="n">OptimizationUnconstrainedScaleShift</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_problem</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">y</span>
<span class="go">(0.006667, -1733.333313)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Elapsed time: &quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span><span class="p">,</span> <span class="s">&quot;seconds&quot;</span>
<span class="go">Elapsed time:  0.0 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Execution count: &quot;</span><span class="p">,</span> <span class="n">opt_problem</span><span class="o">.</span><span class="n">paraboloid</span><span class="o">.</span><span class="n">exec_count</span>
<span class="go">Execution count:  23</span>
</pre></div>
</div>
<p>Just as before, the optimization converges more quickly and with fewer iterations.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://openmdao.org">
 <img src="../../_static/OpenMDAO_Logo_200w_padded.png"
border="0" alt="OpenMDAO Home"/>
</a>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using Scalers and Adders</a><ul>
<li><a class="reference internal" href="#an-example-problem-requiring-scaling">An Example Problem Requiring Scaling</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="constrained.html"
                        title="previous chapter">Building a Model - Constrained Optimization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="doe.html"
                        title="next chapter">Building a Model - Executing a Design of Experiment (DOE)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/tutorials/optimization/scaler_adder.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="doe.html" title="Building a Model - Executing a Design of Experiment (DOE)"
             >next</a> |</li>
        <li class="right" >
          <a href="constrained.html" title="Building a Model - Constrained Optimization"
             >previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="../index.html" >OpenMDAO Tutorials</a> &raquo;</li>
          <li><a href="index.html" >Simple Optimization</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright none.
      Last updated on Apr 23, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>