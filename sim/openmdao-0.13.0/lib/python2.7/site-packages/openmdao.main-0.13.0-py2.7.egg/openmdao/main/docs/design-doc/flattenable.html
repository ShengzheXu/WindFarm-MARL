<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Flattenable vs. Non-flattenable Variables &mdash; OpenMDAO Documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenMDAO Documentation" href="../index.html" />
    <link rel="up" title="Design Doc Outline" href="index.html" />
    <link rel="next" title="Linear Solvers for Derivative Calculation" href="linear_solvers.html" />
    <link rel="prev" title="Execution Management (Data Passing, etc.)" href="execution_mgmt.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="linear_solvers.html" title="Linear Solvers for Derivative Calculation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="execution_mgmt.html" title="Execution Management (Data Passing, etc.)"
             accesskey="P">previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">Design Doc Outline</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="flattenable-vs-non-flattenable-variables">
<h1>Flattenable vs. Non-flattenable Variables<a class="headerlink" href="#flattenable-vs-non-flattenable-variables" title="Permalink to this headline">Â¶</a></h1>
<p>To support distributed computing through MPI, OpenMDAO needs to pass
data between the distributed processes efficiently.  When possible,
it stores the model variables in a distributed vector so that they can be
passed between processes and so that gradients can be calculated efficiently.
Not every Variable can be handled this way, so variables are classified
into two categories: <cite>flattenable</cite> and <cite>non-flattenable</cite>.</p>
<p>A <cite>flattenable</cite> variable is a differentiable variable that can be transformed
to and from a 1-dimensional floating point array. All Float and all Arrays
with a float <tt class="docutils literal"><span class="pre">dtype</span></tt> fall into this category. Integers and integer arrays
are not flattenable. While they can be converted into a 1d float array by
casting them as floats, they cannot be converted back without rounding or
truncation. In addition, integers are not inherently differentiable as
component outputs and intputs.</p>
<p>A <cite>non-flattenable</cite> variable is everything else. This includes integers and
integer arrays, strings, dictionaries, lists, and any custom object.</p>
<p>Flattenable variables are all passed via the distributed vector while
unflattenable variables currently cannot be passed when running under MPI.
When running serially, they are passed using the old OpenMDAO set/get
methods.</p>
<p>A custom data object can be converted into a flattenable variable by defining
three methods on the object: <tt class="docutils literal"><span class="pre">get_flattened_size</span></tt>, <tt class="docutils literal"><span class="pre">get_flattened_value</span></tt>,
and <tt class="docutils literal"><span class="pre">set_flattened_value</span></tt>. Similarly, a flattenable variable can be
excluded from the distributed vector by giving it the metadata <tt class="docutils literal"><span class="pre">noflat=True</span></tt>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://openmdao.org">
 <img src="../_static/OpenMDAO_Logo_200w_padded.png"
border="0" alt="OpenMDAO Home"/>
</a>

  <h4>Previous topic</h4>
  <p class="topless"><a href="execution_mgmt.html"
                        title="previous chapter">Execution Management (Data Passing, etc.)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="linear_solvers.html"
                        title="next chapter">Linear Solvers for Derivative Calculation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/design-doc/flattenable.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="linear_solvers.html" title="Linear Solvers for Derivative Calculation"
             >next</a> |</li>
        <li class="right" >
          <a href="execution_mgmt.html" title="Execution Management (Data Passing, etc.)"
             >previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="index.html" >Design Doc Outline</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright none.
      Last updated on Apr 23, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>