<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Working with Variables &mdash; OpenMDAO Documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenMDAO Documentation" href="../index.html" />
    <link rel="up" title="The Basics" href="index.html" />
    <link rel="next" title="Setting up a Basic Model With Paraboloid" href="assembly.html" />
    <link rel="prev" title="Overview" href="building.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="assembly.html" title="Setting up a Basic Model With Paraboloid"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="building.html" title="Overview"
             accesskey="P">previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">The Basics</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="working-with-variables">
<span id="variables"></span><h1>Working with Variables<a class="headerlink" href="#working-with-variables" title="Permalink to this headline">¶</a></h1>
<p>In OpenMDAO, a <em>variable</em> is a piece of data that can be seen or manipulated by
other entities in the framework. Any data that is passed between components in a
model must use variables to declare the inputs and outputs for each
component.</p>
<p>You can create a variable for a component in two ways. The first way is to
declare it in the component&#8217;s class definition as illustrated in the examples
that follow. The second way is to add it using a component&#8217;s <tt class="docutils literal"><span class="pre">add</span></tt> function.
Use the second way only if a variable needs to be added after the component
is instantiated.</p>
<p>A simple component that takes a floating point number as an input and
provides a floating point number as an output would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.main.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span>


<span class="k">class</span> <span class="nc">Simple</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A simple multiplication &quot;&quot;&quot;</span>

    <span class="c"># set up interface to the framework</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The input x&#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The output y&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; y = 3*x &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">3.0</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</pre></div>
</div>
<div class="section" id="built-in-variable-types">
<h2>Built-in Variable Types<a class="headerlink" href="#built-in-variable-types" title="Permalink to this headline">¶</a></h2>
<p id="index-0"><strong>Summary of Variable Types</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Callable Signature</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Array</td>
<td><tt class="docutils literal"><span class="pre">Array(</span> <span class="pre">[default_value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">shape</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">dtype</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">units</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">units</span> <span class="pre">=</span> <span class="pre">None]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-odd"><td>Bool</td>
<td><tt class="docutils literal"><span class="pre">Bool(</span> <span class="pre">[value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-even"><td>Complex</td>
<td><tt class="docutils literal"><span class="pre">Complex(</span> <span class="pre">[value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-odd"><td>Enum</td>
<td><tt class="docutils literal"><span class="pre">Enum(</span> <span class="pre">[default_value,</span> <span class="pre">values</span> <span class="pre">=</span> <span class="pre">(),</span>
<span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">aliases</span> <span class="pre">=</span> <span class="pre">()]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-even"><td>File</td>
<td><tt class="docutils literal"><span class="pre">File(</span> <span class="pre">[default_value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">legal_types</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">local_path</span> <span class="pre">=</span> <span class="pre">None]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-odd"><td>Float</td>
<td><tt class="docutils literal"><span class="pre">Float(</span> <span class="pre">[default_value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">low</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">high</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">exclude_low</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">exclude_high</span> <span class="pre">=</span> <span class="pre">False,</span>
<span class="pre">units</span> <span class="pre">=</span> <span class="pre">None]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-even"><td>Int</td>
<td><tt class="docutils literal"><span class="pre">Int(</span> <span class="pre">[default_value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">low</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">high</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">exclude_low</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">exclude_high</span> <span class="pre">=</span> <span class="pre">False]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-odd"><td>Slot</td>
<td><tt class="docutils literal"><span class="pre">Slot(</span> <span class="pre">[klass</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">factory</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">args</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">kw</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">allow_none</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">adapt</span> <span class="pre">=</span> <span class="pre">None,</span>
<span class="pre">required</span> <span class="pre">=</span> <span class="pre">False]</span> <span class="pre">)</span></tt></td>
</tr>
<tr class="row-even"><td>Str</td>
<td><tt class="docutils literal"><span class="pre">Str(</span> <span class="pre">[value</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">iotype</span> <span class="pre">=</span> <span class="pre">None]</span> <span class="pre">)</span></tt></td>
</tr>
</tbody>
</table>
<p>When a variable is declared, it gets passed a number of arguments, many of which are
optional.</p>
<p>But the <em>iotype</em> attribute is required for all variables regardless of type.
Its function is to tell the framework whether the variable should be
treated as an input or an output.</p>
<p><strong>Summary of iotypes</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>iotype</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">iotype='in'</span></tt></td>
<td>Component input</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">iotype='out'</span></tt></td>
<td>Component output</td>
</tr>
</tbody>
</table>
<p>The <em>desc</em> attribute is a concise description of the variable &#8211; one or
two sentences should be fine. While nothing in the framework requires this
description, it would be wise to include one for every input and output of your
components.</p>
<p>It is also possible to create new types of variables to use in your models.
For an example of a user-created variable, see <a class="reference internal" href="../plugin-guide/variable_plugin.html#building-a-variable-plugin"><em>Building a Variable Plugin</em></a>.</p>
<div class="section" id="arrays">
<span id="index-1"></span><h3><em>Arrays</em><a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h3>
<p>You can use an array as a variable by using the <em>Array</em> trait. The value for an Array can be
expressed as either a Python array or a NumPy array. NumPy arrays are very useful because of NumPy&#8217;s
built-in mathematical capabilities. Either array can be n-dimensional and potentially of any type.</p>
<p>Constructing an Array variable requires a couple of additional parameters that
are illustrated in the following example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="nb">float</span> <span class="k">as</span> <span class="n">numpy_float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">],[</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">]]),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy_float</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">.</span><span class="n">default_value</span>
<span class="go">array([[ 1.,  2.],</span>
<span class="go">       [ 3.,  5.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">.</span><span class="n">default_value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="go">2.0</span>
</pre></div>
</div>
<p>Here, we import the Array variable and the NumPy array, which is a
general-purpose n-dimensional array class. A 2-dimensional array is assigned as
the default value for the variable named <em>z</em>.</p>
<p>The <em>dtype</em> parameter defines the type of variable that is in the array. For
example, using a string (<em>str</em>) for a dtype would give an array of strings. Any
of Python&#8217;s standard types and NumPy&#8217;s additional types should be valid for the
dtype parameter. The alternative <em>typecode</em> specification is also supported for
non-NumPy arrays (e.g., <tt class="docutils literal"><span class="pre">typecode='I'</span></tt> for unsigned integers.)</p>
<p>The <em>shape</em> parameter is not a required attribute; the Array will default to
the dimensions of the array that are given as the value. However, it is often
useful to specify the size explicitly, so an exception is generated if an
array of a different size or shape is passed into it. If the size of an array is not
determined until runtime (e.g., a driver that takes an array of constraint
equations as an input), then the shape should be left blank.</p>
<p>An array can also have a single unit defined with the <em>units</em> parameter. This unit
applies to every element in the array, and it enables unit checking and conversion
when connecting an array output to an array input.</p>
<p>Below is an example of a simple component that takes two Arrays as inputs
and calculates their dot product as an output.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span><span class="p">,</span> <span class="nb">sum</span><span class="p">,</span> <span class="nb">float</span>

<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Array</span><span class="p">,</span> <span class="n">Float</span>


<span class="k">class</span> <span class="nc">Dot</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A component that outputs a dot product of two arrays&quot;&quot;&quot;</span>

    <span class="c"># set up interface to the framework</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Input 1&quot;</span><span class="p">,</span>
               <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mf">7.0</span><span class="p">,</span><span class="mf">8.0</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Input 2&quot;</span><span class="p">,</span>
               <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Dot Product&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; calculate dot product &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raise_exception</span><span class="p">(</span><span class="s">&#39;Input vectors must be of equal length&#39;</span><span class="p">,</span>
                      <span class="ne">RuntimeError</span><span class="p">)</span>

        <span class="c"># Note: array multiplication is element by element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">)</span>

        <span class="c"># print the first element of x1</span>
        <span class="k">print</span> <span class="n">x1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Multiplication of a NumPy array is element by element, so <em>sum</em> is used to
complete the calculation of the dot product. Individual elements of the array
can also be accessed using brackets. An OpenMDAO Array behaves like a NumPy
array, so it can be used as an argument in a NumPy function like <cite>sum</cite>.</p>
<p>Note that this is a horrible way to do a dot product. Numpy has a dot function
which is much faster than sum.</p>
</div>
<div class="section" id="enums">
<span id="index-2"></span><span id="id1"></span><h3><em>Enums</em><a class="headerlink" href="#enums" title="Permalink to this headline">¶</a></h3>
<p>It is possible to use an <em>Enum</em> (enumeration) type as a variable in
OpenMDAO. This is useful for cases where an input has certain fixed values
that are possible. For example, consider a variable that can be one of three
colors:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>


<span class="k">class</span> <span class="nc">TrafficLight</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">color2</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s">&#39;Red&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;Red&#39;</span><span class="p">,</span> <span class="s">&#39;Yellow&#39;</span><span class="p">,</span> <span class="s">&#39;Green&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we can interact like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">TrafficLight</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color2</span>
<span class="go">&#39;Red&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color2</span><span class="o">=</span><span class="s">&quot;Purple&quot;</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">ValueError: </span>: <span class="n-Identifier">Variable &#39;color2&#39; must be in (&#39;Red&#39;, &#39;Yellow&#39;, &#39;Green&#39;), but a value of Purple &lt;type &#39;str&#39;&gt; was specified.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color2</span><span class="o">=</span><span class="s">&quot;Green&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color2</span>
<span class="go">&#39;Green&#39;</span>
</pre></div>
</div>
<p>However, if the Enum is being used to select the input for an old code, then you will
most likely need to feed it integers, not strings. To make this more convenient, the
Enum includes an optional parameter <em>alias</em> that can be used to provide descriptive
strings to go along with the numbers the code expects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>


<span class="k">class</span> <span class="nc">TrafficLight</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;Red&quot;</span><span class="p">,</span> <span class="s">&quot;Yellow&quot;</span><span class="p">,</span> <span class="s">&quot;Green&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Let&#8217;s create an instance of this component and try setting the Enum.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">TrafficLight</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color</span>
<span class="go">2</span>
</pre></div>
</div>
<p>If we set to an invalid value, an exception is raised.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">color</span><span class="o">=</span><span class="mi">4</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">ValueError: </span>: <span class="n-Identifier">Variable &#39;color&#39; must be in (0, 1, 2), but a value of 4 &lt;type &#39;int&#39;&gt; was specified.`</span>
</pre></div>
</div>
<p>We can also access the list of indices and the list of aliases directly from the trait.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">color_trait</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">get_trait</span><span class="p">(</span><span class="s">&#39;color&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color_trait</span><span class="o">.</span><span class="n">aliases</span>
<span class="go">(&#39;Red&#39;, &#39;Yellow&#39;, &#39;Green&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color_trait</span><span class="o">.</span><span class="n">values</span>
<span class="go">(0, 1, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color_trait</span><span class="o">.</span><span class="n">aliases</span><span class="p">[</span><span class="n">test</span><span class="o">.</span><span class="n">color</span><span class="p">]</span>
<span class="go">&#39;Green&#39;</span>
</pre></div>
</div>
<p>If the default value is not given, then the first value of the list is taken as the default.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">color2</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">((</span><span class="s">&#39;Red&#39;</span><span class="p">,</span> <span class="s">&#39;Yellow&#39;</span><span class="p">,</span> <span class="s">&#39;Green&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is the simplest form of the Enum constructor.</p>
<p>It is also possible to produce a simple array that behaves like an Enum, where each element of
the array can contain only a value that is in the Enum. This kind of variable can be
defined by creating a <em>List</em> of Enums.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>


<span class="k">class</span> <span class="nc">Dice</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">roll</span> <span class="o">=</span> <span class="n">List</span><span class="p">(</span> <span class="n">Enum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This example defines a variable named <em>roll</em> that can contain the values for any number
of dice. Instead of giving a List as the default value, we&#8217;ve given it the definition
for an Enum variable that has a default value of 1 and a set of valid values spanning
the integers 1 to 6. Note that the Enum doesn&#8217;t need an iotype, but the List does.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_dice</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Valid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dice</span><span class="o">.</span><span class="n">roll</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Invalid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dice</span><span class="o">.</span><span class="n">roll</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">ValueError: </span>: <span class="n-Identifier">Variable &#39;roll&#39; must be in (1, 2, 3, 4, 5, 6), but a value of 7 &lt;type &#39;int&#39;&gt; was specified.</span>
</pre></div>
</div>
</div>
<div class="section" id="file-variables">
<span id="index-3"></span><h3><em>File Variables</em><a class="headerlink" href="#file-variables" title="Permalink to this headline">¶</a></h3>
<p>The value of a <a class="reference internal" href="../srcdocs/packages/openmdao.main.html#openmdao.main.datatypes.file.File" title="openmdao.main.datatypes.file.File"><tt class="xref py py-class docutils literal"><span class="pre">File</span></tt></a> variable is a
<a class="reference internal" href="../srcdocs/packages/openmdao.main.html#openmdao.main.datatypes.file.FileRef" title="openmdao.main.datatypes.file.FileRef"><tt class="xref py py-class docutils literal"><span class="pre">FileRef</span></tt></a>, a reference to a file
on disk (possibly at a remote system) along with various metadata regarding the
file&#8217;s format.
Legal metadata associated with the File variable depends on its iotype.
File variables with iotype <tt class="docutils literal"><span class="pre">in</span></tt> may specify <em>legal_types</em> and <em>local_path</em>
if desired.</p>
<p><em>legal_types</em> is a list of strings specifying what <em>content_type</em> an
incoming file may be (the strings are arbitrary, but must match exactly).
If a content_type does not match, a ValueError is raised.
If not specified, any content_type is valid.
To connect to an input variable with legal_types specified, the output
variable must have a default FileRef specified with a matching content_type.</p>
<p>If an input variable specifies <em>local_path</em>, the incoming file will be
copied to that path when the input variable is set.
This is just a convenience for a common operation with external codes.</p>
<p>Usage of an output variable consists of creating the file on disk in whatever
manner is convenient, creating a FileRef referring to that file with associated
metadata describing the file, and assigning the FileRef to the File variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">File</span><span class="p">,</span> <span class="n">FileRef</span>

<span class="k">class</span> <span class="nc">Source</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Send a greeting. &quot;&quot;&quot;</span>
    <span class="n">outfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Create the file.</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">&#39;source.txt&#39;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;Hello world!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">FileRef</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>  <span class="c"># Assign reference to variable.</span>
</pre></div>
</div>
<p>If the FileRef needs metadata and the metadata doesn&#8217;t change (which is fairly
common), an alternative form for the above component may be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">File</span><span class="p">,</span> <span class="n">FileRef</span>

<span class="k">class</span> <span class="nc">Source</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Send a greeting. &quot;&quot;&quot;</span>
    <span class="n">outfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">FileRef</span><span class="p">(</span><span class="s">&#39;source.txt&#39;</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s">&#39;example&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Create the file.</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;Hello world!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c"># Force new value.</span>
</pre></div>
</div>
<p>The last line is necessary so that Traits will perform the downstream
assignment. Without this, the value of the variable hasn&#8217;t changed, so Traits
sees no new data to process. Note that only the FileRef is being copied,
not the file data.</p>
<p>Usage of an input variable takes one of two forms, depending on whether you
want to read the file directly in your component, or some other code needs to
access it by filename.</p>
<p>To access the file directly, simply <tt class="xref py py-meth docutils literal"><span class="pre">open()</span></tt> the File variable&#8217;s value.
The (possibly remote) file will be opened in either text or binary mode as
appropriate and a <a class="reference internal" href="../srcdocs/packages/openmdao.main.html#openmdao.main.file_supp.RemoteFile" title="openmdao.main.file_supp.RemoteFile"><tt class="xref py py-class docutils literal"><span class="pre">RemoteFile</span></tt></a>
object will be returned which acts like other Python file objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">File</span>

<span class="k">class</span> <span class="nc">Sink1</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Receive a file and display. &quot;&quot;&quot;</span>
    <span class="n">infile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Note that this is doing open() on a FileRef.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">infile</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inp</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">line</span><span class="p">,</span>
</pre></div>
</div>
<p>If instead the incoming file is to be used by some other code, set the
local_path attribute on the File variable to where the code expects the
file to be. When the File variable&#8217;s value is set, the file data will
automatically be copied to this location.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">File</span>

<span class="k">class</span> <span class="nc">Sink2</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Receive a file and display. &quot;&quot;&quot;</span>
    <span class="n">infile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">local_path</span><span class="o">=</span><span class="s">&#39;input.txt&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Note that this is doing a direct open().</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;input.txt&#39;</span><span class="p">,</span> <span class="s">&#39;rU&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inp</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">line</span><span class="p">,</span>
</pre></div>
</div>
<p>FileRefs are an extension of
<a class="reference internal" href="../srcdocs/packages/openmdao.main.html#openmdao.main.file_supp.FileMetadata" title="openmdao.main.file_supp.FileMetadata"><tt class="xref py py-class docutils literal"><span class="pre">FileMetadata</span></tt></a>,
which holds predefined as well as arbitrary user metadata.
The predefined metadata is used to describe file layout, primarily basic binary
formats.</p>
<p>The <em>path</em> must be a descendant of the parent component&#8217;s path.
This is both a security precaution and it allows for collecting a model into
a Python egg for transport.</p>
<p>The <em>binary</em> flag is used to mark a file as binary. This is important
when transferring files between Windows and OS X or Linux.  The default value
is False, signifying a text file which needs newline translation between
different systems.  If newline translation is applied to a binary file it will
corrupt the data.</p>
<p>The <a class="reference internal" href="../srcdocs/packages/openmdao.util.html#openmdao.util.stream.Stream" title="openmdao.util.stream.Stream"><tt class="xref py py-class docutils literal"><span class="pre">Stream</span></tt></a> class can be helpful when
reading or writing binary formats.  Stream uses <tt class="xref py py-mod docutils literal"><span class="pre">numpy</span></tt> internally which
requires a standard Python file object rather than RemoteFile, so you&#8217;ll have
to use the local_path option for input files.</p>
<p>Here&#8217;s a complete example of a source component sending to two destination
components.  The source component generates both text and binary files.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Assembly</span><span class="p">,</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">File</span><span class="p">,</span> <span class="n">FileRef</span>
<span class="kn">from</span> <span class="nn">openmdao.util.stream</span> <span class="kn">import</span> <span class="n">Stream</span>

<span class="k">class</span> <span class="nc">Source</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Send a greeting and a Fortran unformatted file of numbers. &quot;&quot;&quot;</span>
    <span class="n">txtfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">FileRef</span><span class="p">(</span><span class="s">&#39;source.txt&#39;</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s">&#39;example&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>
    <span class="n">binfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">FileRef</span><span class="p">(</span><span class="s">&#39;unformatted.dat&#39;</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">unformatted</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">content_type</span><span class="o">=</span><span class="s">&#39;data&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Create the files.</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">txtfile</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;Hello world!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txtfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">txtfile</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c"># Force new value.</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binfile</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">unformatted</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
                <span class="k">print</span> <span class="n">data</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">write_floats</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">full_record</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">binfile</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c"># Force new value.</span>
        <span class="k">print</span>

<span class="k">class</span> <span class="nc">Sink1</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Receive a file and display. &quot;&quot;&quot;</span>
    <span class="n">infile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">legal_types</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">,</span> <span class="s">&#39;example&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Note that this is doing open() on a FileRef.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">infile</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
            <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pathname</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inp</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">line</span><span class="p">,</span>
            <span class="k">print</span>

<span class="k">class</span> <span class="nc">Sink2</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Receive files and display. &quot;&quot;&quot;</span>
    <span class="n">txtfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">legal_types</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">,</span> <span class="s">&#39;example&#39;</span><span class="p">],</span>
                   <span class="n">local_path</span><span class="o">=</span><span class="s">&#39;input.txt&#39;</span><span class="p">)</span>
    <span class="n">binfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">legal_types</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">],</span> <span class="n">local_path</span><span class="o">=</span><span class="s">&#39;input.dat&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Note that this is doing a direct open().</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;input.txt&#39;</span><span class="p">,</span> <span class="s">&#39;rU&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
            <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pathname</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inp</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">line</span><span class="p">,</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;input.dat&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
            <span class="c"># Setup stream based on format declared on incoming file.</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">binfile</span><span class="o">.</span><span class="n">binary</span><span class="p">,</span>
                            <span class="n">unformatted</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">binfile</span><span class="o">.</span><span class="n">unformatted</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read_floats</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">full_record</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">print</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c"># Use list() just for consistent format.</span>
            <span class="k">print</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">top</span> <span class="o">=</span> <span class="n">Assembly</span><span class="p">()</span>
    <span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;src&#39;</span><span class="p">,</span> <span class="n">Source</span><span class="p">())</span>
    <span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;dst1&#39;</span><span class="p">,</span> <span class="n">Sink1</span><span class="p">())</span>
    <span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;dst2&#39;</span><span class="p">,</span> <span class="n">Sink2</span><span class="p">())</span>
    <span class="n">top</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="s">&#39;src&#39;</span><span class="p">,</span> <span class="s">&#39;dst1&#39;</span><span class="p">,</span> <span class="s">&#39;dst2&#39;</span><span class="p">))</span>
    <span class="n">top</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;src.txtfile&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;dst1.infile&#39;</span><span class="p">,</span> <span class="s">&#39;dst2.txtfile&#39;</span><span class="p">))</span>
    <span class="n">top</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;src.binfile&#39;</span><span class="p">,</span> <span class="s">&#39;dst2.binfile&#39;</span><span class="p">)</span>
    <span class="n">top</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">top</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">force_execute</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c"># Force another run.</span>
    <span class="n">top</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="slot-variables">
<span id="index-4"></span><h3><em>Slot Variables</em><a class="headerlink" href="#slot-variables" title="Permalink to this headline">¶</a></h3>
<p>A <em>Slot</em> is a variable that requires any value assigned to it to be either an instance of a
specific class or an implementation of a specific Interface. The class or Interface to be matched is
the first argument to the constructor. Failure to match the specified class or Interface will result
in an exception being raised. Slot traits are typically used to implement
placeholders for plugins within a component.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Slot</span>
<span class="kn">from</span> <span class="nn">openmdao.main.interfaces</span> <span class="kn">import</span> <span class="n">ICaseRecorder</span><span class="p">,</span> <span class="n">ICaseIterator</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A component that takes a class as an input &quot;&quot;&quot;</span>

    <span class="n">recorder</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span><span class="n">ICaseRecorder</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Something to append() to.&#39;</span><span class="p">,</span>
                      <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">caseiter</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span><span class="n">ICaseIterator</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;set of cases to run.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, we have two Slots. The Slot called <em>caseiter</em> requires data objects
that implement the <tt class="docutils literal"><span class="pre">ICaseIterator</span></tt> interface. The Slot called <em>recorder</em> is required to implement
the <tt class="docutils literal"><span class="pre">ICaseRecorder</span></tt> interface.</p>
<p>The attribute <em>required</em> is used to indicate whether the object that plugs into
a Slot is required. If <tt class="docutils literal"><span class="pre">required</span></tt> is True, then an exception will be raised
if the component is executed when that object is not present.</p>
<p>You can also use a class name to define what is permitted in the Slot. In this
code sample, we&#8217;ve specified that the <tt class="docutils literal"><span class="pre">recorder</span></tt> Slot can contain only an
object of class <tt class="docutils literal"><span class="pre">CSVCaseRecorder`</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Slot</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.casehandlers.api</span> <span class="kn">import</span> <span class="n">CSVCaseRecorder</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A component that takes a class as an input &quot;&quot;&quot;</span>

    <span class="n">recorder</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span><span class="n">CSVCaseRecorder</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Something to append() to.&#39;</span><span class="p">,</span>
                      <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also declare a pre-filled Slot by passing an instance instead of the class
name. This is a shortcut for adding it later.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Slot</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.casehandlers.api</span> <span class="kn">import</span> <span class="n">CSVCaseRecorder</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A component that takes a class as an input &quot;&quot;&quot;</span>

    <span class="n">recorder</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span><span class="n">CSVCaseRecorder</span><span class="p">(),</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Something to append() to.&#39;</span><span class="p">,</span>
                      <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<span class="target" id="index-5"></span><p id="index-6"><em>Instance Variables</em></p>
<p><em>Instance</em> variables behave almost identically to <em>Slot</em> variables, but they allow for having &#8220;iotype&#8221; metadata.
This means they can be handled as input or output variables.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Instance</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.casehandlers.api</span> <span class="kn">import</span> <span class="n">CSVCaseRecorder</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A component that takes a class as an input &quot;&quot;&quot;</span>

    <span class="n">recorder</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">CSVCaseRecorder</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&quot;in&quot;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Something to append() to.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above example, the <em>Instance</em> called <em>recorder</em> can, and should be used the same way as <em>recorder</em>
from the previous <em>Slot</em> example. However, you can connect <em>recorder</em> to output variables should you choose. Such
connections allow for passing generic objects between components that support a specific interface or class.</p>
</div>
<div class="section" id="unit-conversions-with-float-and-array">
<h3><em>Unit Conversions with Float and Array</em><a class="headerlink" href="#unit-conversions-with-float-and-array" title="Permalink to this headline">¶</a></h3>
<p>OpenMDAO also supports variables with explicitly defined units using the Float and Array
variable types, which are included as part of the Standard Library. Both
types provide the following useful effects when utilized in the framework.</p>
<ul class="simple">
<li>Automatically convert a value passed from an output to an input with compatible units (e.g., <tt class="docutils literal"><span class="pre">'inch'</span></tt> and <tt class="docutils literal"><span class="pre">'m')</span></tt></li>
<li>Raise an exception when attempting to pass a value from an output to an input having incompatible units (e.g., <tt class="docutils literal"><span class="pre">'kg'</span></tt> and <tt class="docutils literal"><span class="pre">'m'</span></tt>)</li>
<li>Allow values to be passed between unitless variables and variables with units; no unit conversion occurs</li>
</ul>
<p>A complete list of the available units is given in the <a class="reference internal" href="../units.html#units"><em>Appendix: Summary of Units</em></a>. The unit conversion code
and the base set of units come from the PhysicalQuantities package found in <a class="reference external" href="http://dirac.cnrs-orleans.fr/plone/software/scientificpython">Scientific Python</a>. It was necessary to add a few
units to the existing ones in PhysicalQuantities (in particular, a currency unit), so a new
Units package was derived and is included in OpenMDAO as <tt class="docutils literal"><span class="pre">openmdao.units</span></tt>. This package has
the same basic function as that of PhysicalQuantities, but to make it more extensible, the unit
definitions were moved from the internal dictionary into an externally readable text file called
<tt class="docutils literal"><span class="pre">unitLibdefault.ini</span></tt>. For more information on the OpenMDAO units package, including how to add units, see the
<a class="reference internal" href="../srcdocs/packages/openmdao.units.html#openmdao-units-units-py"><em>source documentation</em></a>.

As an example, consider a component that calculates a pressure (in Pascals) given
a known force (in Newtons) applied to a known area (in square meters). Such a
component would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span>


<span class="k">class</span> <span class="nc">Pressure</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Simple component to calculate pressure given force and area&quot;&quot;&quot;</span>

    <span class="c"># set up interface to the framework</span>
    <span class="n">force</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;force&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;N&#39;</span><span class="p">)</span>
    <span class="n">area</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">exclude_low</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;m*m&#39;</span><span class="p">)</span>

    <span class="n">pressure</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Pa&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;calculate pressure&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">force</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">area</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">low</span></tt> and <tt class="docutils literal"><span class="pre">exclude_low</span></tt> parameters are used in the declaration of <em>area</em> to prevent a
value of zero from being assigned, resulting in a division error. Of course, you
could still get very large values for <em>pressure</em> if area is near machine zero.</p>
<p>This units library can also be used to convert internal variables by importing
the function <tt class="docutils literal"><span class="pre">convert_units</span></tt> from <tt class="docutils literal"><span class="pre">openmdao.main.api</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">convert_units</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_units</span><span class="p">(</span><span class="mf">12.0</span><span class="p">,</span><span class="s">&#39;inch&#39;</span><span class="p">,</span><span class="s">&#39;ft&#39;</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
</div>
<div class="section" id="coercion-and-casting">
<h3><em>Coercion and Casting</em><a class="headerlink" href="#coercion-and-casting" title="Permalink to this headline">¶</a></h3>
<p>OpenMDAO variables have a certain pre-defined behavior when a value from a
variable of a different type is assigned. Generally, they do not try to
coerce the given value into the type that they expect. This means that
most mis-assignments in variable connections (e.g., a float connected to
a string) will generate an exception. However, certain widening
coercions are permitted (e.g., <tt class="docutils literal"><span class="pre">Int-&gt;Float,</span> <span class="pre">Bool-&gt;Int,</span> <span class="pre">Bool-&gt;Float</span></tt>). No
coercion from Str or to Str is allowed. If you need to apply different
coercion behavior, just create a new class inherited from Variable and
perform the coercion in the validate function.</p>
<p>More details can be found in the <a class="reference external" href="http://docs.enthought.com/traits/traits_user_manual/defining.html?highlight=cbool#predefined-traits-for-simple-types">Traits 4 User Manual</a>.</p>
</div>
</div>
<div class="section" id="variable-trees">
<h2>Variable Trees<a class="headerlink" href="#variable-trees" title="Permalink to this headline">¶</a></h2>
<p>For components with many variables, it is often useful to compartmentalize
them into a hierarchy of containers to enhance readability and &#8220;findability.&#8221;</p>
<p>Variables in OpenMDAO can be compartmentalized by creating a container from the
VariableTree base class. This container merely contains variables or other
VariableTrees.</p>
<p>Normally a variable is accessed in the data hierarchy as:</p>
<p><tt class="docutils literal"><span class="pre">...component_name.var_name</span></tt></p>
<p>but when it is in a VariableTree, it can be accessed as:</p>
<p><tt class="docutils literal"><span class="pre">...component_name.container_name(.subcontainer_name.etc).var_name</span></tt></p>
<p>Consider an example of an aircraft simulation that requires values for
three variables that define two flight conditions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">VariableTree</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span><span class="p">,</span> <span class="n">VarTree</span>

<span class="k">class</span> <span class="nc">FlightCondition</span><span class="p">(</span><span class="n">VariableTree</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Container of variables&quot;&quot;&quot;</span>

    <span class="n">airspeed</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">120.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;nmi/h&#39;</span><span class="p">)</span>
    <span class="n">angle_of_attack</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">)</span>
    <span class="n">sideslip_angle</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">AircraftSim</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This component contains variables in a VariableTree&quot;&quot;&quot;</span>

    <span class="c"># create VarTrees to handle updates to our FlightCondition attributes</span>
    <span class="n">fcc1</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">FlightCondition</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">fcc2</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">FlightCondition</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>

    <span class="n">weight</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">5400.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kg&#39;</span><span class="p">)</span>
    <span class="c"># etc.</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do something.&quot;&quot;&quot;</span>

        <span class="k">print</span> <span class="s">&quot;FCC1 angle of attack = &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fcc1</span><span class="o">.</span><span class="n">angle_of_attack</span>
        <span class="k">print</span> <span class="s">&quot;FCC2 angle of attack = &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fcc2</span><span class="o">.</span><span class="n">angle_of_attack</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s important to create a VarTree variable (which is much like a <a class="reference internal" href="../glossary.html#term-slot"><em class="xref std std-term">Slot</em></a>)
for each VariableTree object contained in your component if you intend to
connect it to variables in other components.
Also make sure to set the <em>iotype</em> attribute in the VarTree.  If you don&#8217;t, changes
to variables within the VariableTree object won&#8217;t properly notify the component.
If you have a nested VariableTree, it&#8217;s necessary to create a VarTree in the
VariableTree that contains it.</p>
</div>
<p>Here, we defined the class <tt class="docutils literal"><span class="pre">FlightCondition</span></tt>, containing three variables.
The component <tt class="docutils literal"><span class="pre">AircraftSim</span></tt> is also defined with a variable <em>weight</em>, the
input FlightCondition <em>fcc1</em> and the output FlightCondition <em>fcc2</em>. We can
access weight through <tt class="docutils literal"><span class="pre">self.weight</span></tt>; likewise, we can access the airspeed of the output flight
condition through <tt class="docutils literal"><span class="pre">self.fcc2.airspeed</span></tt>. In this example we had only one
level of nesting in our FlightCondition class, but a VariableTree can be added to
another VariableTree, so any level of nesting is possible.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyNestedVars</span><span class="p">(</span><span class="n">VariableTree</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A nested container of variables&quot;&quot;&quot;</span>

    <span class="n">f1</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">120.0</span><span class="p">)</span>
    <span class="n">f2</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="n">sub_vartree</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">FlightCondition</span><span class="p">())</span>
</pre></div>
</div>
<p>An interesting thing about this example is that we&#8217;ve
implemented a data structure with this VariableTree and used it to create
multiple copies of a set of variables. This can prove useful for blocks
of variables that are repeated in a component. At the framework level,
connections can be made either to individual variables within a VariableTree or
to entire VariableTrees. It is also possible
to create custom data objects and validators to use when connecting
components. This is explained in <a class="reference internal" href="../plugin-guide/variable_plugin.html#building-a-variable-plugin"><em>Building a Variable Plugin</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://openmdao.org">
 <img src="../_static/OpenMDAO_Logo_200w_padded.png"
border="0" alt="OpenMDAO Home"/>
</a>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Working with Variables</a><ul>
<li><a class="reference internal" href="#built-in-variable-types">Built-in Variable Types</a><ul>
<li><a class="reference internal" href="#arrays"><em>Arrays</em></a></li>
<li><a class="reference internal" href="#enums"><em>Enums</em></a></li>
<li><a class="reference internal" href="#file-variables"><em>File Variables</em></a></li>
<li><a class="reference internal" href="#slot-variables"><em>Slot Variables</em></a></li>
<li><a class="reference internal" href="#unit-conversions-with-float-and-array"><em>Unit Conversions with Float and Array</em></a></li>
<li><a class="reference internal" href="#coercion-and-casting"><em>Coercion and Casting</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#variable-trees">Variable Trees</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="building.html"
                        title="previous chapter">Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="assembly.html"
                        title="next chapter">Setting up a Basic Model With Paraboloid</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/basics/variables.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="assembly.html" title="Setting up a Basic Model With Paraboloid"
             >next</a> |</li>
        <li class="right" >
          <a href="building.html" title="Overview"
             >previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="index.html" >The Basics</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright none.
      Last updated on Apr 23, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>