<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Sellar Problem &mdash; OpenMDAO Documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenMDAO Documentation" href="../../index.html" />
    <link rel="up" title="MDAO Architectures" href="index.html" />
    <link rel="next" title="Multidisciplinary Design Feasible (MDF)" href="mdf.html" />
    <link rel="prev" title="MDAO Architectures" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mdf.html" title="Multidisciplinary Design Feasible (MDF)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="MDAO Architectures"
             accesskey="P">previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="../index.html" >OpenMDAO Tutorials</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">MDAO Architectures</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-sellar-problem">
<span id="index-0"></span><h1>The Sellar Problem<a class="headerlink" href="#the-sellar-problem" title="Permalink to this headline">Â¶</a></h1>
<p>We will cover some of the more advanced capabilities of OpenMDAO. You should read and
understand <a class="reference internal" href="../optimization/index.html#optimization-tutorial"><em>Simple Optimization</em></a> and <a class="reference internal" href="../surrogate/index.html#tutorial-metamodel"><em>MetaModel</em></a> before starting this one.</p>
<p>This tutorial illustrates the features of OpenMDAO that support the use of decomposition-based MDAO
architectures, such as:</p>
<ol class="arabic simple">
<li>Multidisciplinary Design Feasible (MDF)</li>
<li>Independent Design Feasible (IDF)</li>
<li>Collaborative Optimization (CO)</li>
</ol>
<p>First we&#8217;ll walk through the manual implementation of these architectures on a simple
example problem. This will introduce you to using iteration hierarchy, metamodeling,
and Design of Experiments (DOE) to construct different kinds of optimization processes.
Understanding this section is important if you want to implement a new MDAO architecture
or an existing one that is not currently available within OpenMDAO.</p>
<p>Once you understand how to construct an MDAO architecture by hand, you&#8217;ll see that it can
take a good amount of work to set up.  That&#8217;s why we&#8217;ll show you how to set up your problem so you can
automatically apply a number of different MDAO architectures. Using the automatic implementation of an architecture
will dramatically simplify your input files.</p>
<p id="index-1">All of these tutorials use the Sellar Problem, which consists of two disciplines as follows:</p>
<div class="figure align-center">
<img alt="Equations showing the two disciplines for the Sellar problem" src="../../_images/SellarResized.png" />
</div>
<p>Variables <em>z1, z2,</em> and <em>x1</em> are the design variables over which we&#8217;d like to minimize
the objective. Both disciplines are functions of <em>z1</em> and <em>z2,</em> so they are called the
<em>global</em> design variables, while only the first discipline is a function of <em>x1,</em> so it
is called the <em>local</em> design variable. The two disciplines are coupled by the
coupling variables <em>y1</em> and <em>y2.</em> Discipline 1 takes <em>y2</em> as an input, and computes <em>y1</em> as
an output, while Discipline 2 takes <em>y1</em> as an input and computes <em>y2</em> as an output. As
such, the two disciplines depend on each other&#8217;s output, so iteration is required to
find a set of coupling variables that satisfies both equations.</p>
<p>Disciplines 1 and 2 were implemented in OpenMDAO as components.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span>


<span class="k">class</span> <span class="nc">Discipline1</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Component containing Discipline 1&quot;&quot;&quot;</span>

    <span class="c"># pylint: disable-msg=E1101</span>
    <span class="n">z1</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Global Design Variable&#39;</span><span class="p">)</span>
    <span class="n">z2</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Global Design Variable&#39;</span><span class="p">)</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Local Design Variable&#39;</span><span class="p">)</span>
    <span class="n">y2</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Disciplinary Coupling&#39;</span><span class="p">)</span>

    <span class="n">y1</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Output of this Discipline&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Evaluates the equation</span>
<span class="sd">        y1 = z1**2 + z2 + x1 - 0.2*y2&quot;&quot;&quot;</span>

        <span class="n">z1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z1</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z2</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x1</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">z1</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">z2</span> <span class="o">+</span> <span class="n">x1</span> <span class="o">-</span> <span class="mf">0.2</span><span class="o">*</span><span class="n">y2</span>



<span class="k">class</span> <span class="nc">Discipline2</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Component containing Discipline 2&quot;&quot;&quot;</span>

    <span class="c"># pylint: disable-msg=E1101</span>
    <span class="n">z1</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Global Design Variable&#39;</span><span class="p">)</span>
    <span class="n">z2</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Global Design Variable&#39;</span><span class="p">)</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Disciplinary Coupling&#39;</span><span class="p">)</span>

    <span class="n">y2</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Output of this Discipline&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Evaluates the equation</span>
<span class="sd">        y1 = y1**(.5) + z1 + z2&quot;&quot;&quot;</span>

        <span class="n">z1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z1</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z2</span>

        <span class="c"># Note: this may cause some issues. However, y1 is constrained to be</span>
        <span class="c"># above 3.16, so lets just let it converge, and the optimizer will</span>
        <span class="c"># throw it out</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="n">y1</span><span class="o">**</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">z1</span> <span class="o">+</span> <span class="n">z2</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">Discipline2</span></tt> contains a square root of variable <em>y1</em> in its calculation. For negative values
of <em>y1,</em> the result would be imaginary, so the absolute value is taken before the square root
is applied. This component is clearly not valid for <tt class="docutils literal"><span class="pre">y1</span> <span class="pre">&lt;</span> <span class="pre">0</span></tt>, but some solvers could
occasionally force <em>y1</em> to go slightly negative while trying to converge the two disciplines . The inclusion
of the absolute value solves the problem without impacting the final converged solution.</p>
<p>These two components are contained in the file <a class="reference download internal" href="../../_downloads/sellar.py"><tt class="xref download docutils literal"><span class="pre">sellar.py</span></tt></a> in the  <tt class="docutils literal"><span class="pre">openmdao.lib.optproblems</span></tt> sub-package.
This part of the standard library contains a number of common optimization problems which you can use to test
your own optimization algorithms.</p>
<p>Now that you have defined the components for the Sellar Problem for yourself, let&#8217;s take a momement to
consider what we have really accomplished. Firstly, we have written two (very simple) analysis components.
If you were working on a real problem, these would likely come in the form of some much more complex tools
that you wrapped in the framework. But keep in mind that from an optimization point of view, whether they
are simple tools or wrappers for real analyses, OpenMDAO still views them as components with inputs, outputs,
and an execute function.</p>
<p>We have talked about the problem formulation and specified that certain variables will be
design variables, while others are coupling variables. But none of the code we have written has told
OpenMDAO about those details. That&#8217;s what we&#8217;ll get to next!</p>
<p><strong>Reference:</strong></p>
<p>Sellar, R. S., Batill, S. M., and Renaud, J. E., &#8220;Response Surface Based,
Concurrent Subspace Optimization for Multidisciplinary System Design,&#8221;
<em>Proceedings References 79 of the 34th AIAA Aerospace Sciences Meeting and
Exhibit,</em> Reno, NV, January 1996.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://openmdao.org">
 <img src="../../_static/OpenMDAO_Logo_200w_padded.png"
border="0" alt="OpenMDAO Home"/>
</a>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">MDAO Architectures</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mdf.html"
                        title="next chapter">Multidisciplinary Design Feasible (MDF)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/tutorials/mdao/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mdf.html" title="Multidisciplinary Design Feasible (MDF)"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="MDAO Architectures"
             >previous</a> |</li>
  <li><a href="http://openmdao.org">OpenMDAO Home</a> &raquo;</li>
  
        <li><a href="../../index.html">OpenMDAO Documentation v0.13.0</a> &raquo;</li>

          <li><a href="../index.html" >OpenMDAO Tutorials</a> &raquo;</li>
          <li><a href="index.html" >MDAO Architectures</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright none.
      Last updated on Apr 23, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>